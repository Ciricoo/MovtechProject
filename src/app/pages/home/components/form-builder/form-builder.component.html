<main>
  <div class="base">
    <div class="nav-base">
      <h2>Forms Groups</h2>
      <div class="buttons">
        <button (click)="openModalCreateGroup()" *ngIf="userRole === 'Administrador'">Criar Grupo</button>
        <button (click)="openModalCreateForm()" *ngIf="userRole === 'Administrador'">Criar Formul√°rio</button>
        <button (click)="openModalCreateQuestion()" *ngIf="userRole === 'Administrador'">Criar Perguntas</button>
      </div>
    </div>
    <div class="forms-groups">
      <ng-container *ngFor="let group of formGroups; let i = index">
        <div class="card border-dark mb-3" style="max-width: 18rem;">
          <div class="card-header">
            {{group.id}}
            <i *ngIf="userRole === 'Administrador'" class="fas fa-ellipsis-v" (click)="toggleMenu(i, $event)"></i>
            <div *ngIf="activeMenuIndex === i" class="menu">
              <ul>
                <li (click)="openModal('edit', group.id)">
                  <i class="fas fa-edit"></i> Editar
                </li>
                <li (click)="openModal('delete', group.id)">
                  <i class="fas fa-trash"></i> Excluir
                </li>
              </ul>
            </div>
          </div>
          <div class="card-body" (click)="openModal('forms', group.id)">
            <h5 class="card-title">{{group.name}}</h5>
            <p class="card-text">Some quick example text to build on the card title and make up the bulk of the card's content.</p>
          </div>
        </div>
      </ng-container>
    </div>
  </div>
  <app-forms *ngIf="modalType === 'forms'" [groupId]="selectedGroupId"></app-forms>
  <app-delete *ngIf="modalType === 'delete'" [itemId]="selectedGroupId" (deleteConfirmed)="loadGroups()"></app-delete>
  <app-edit *ngIf="modalType === 'edit'" [itemId]="selectedGroupId" (editConfirmed)="loadGroups()"></app-edit>
  <app-create-group (createdConfirmed)="loadGroups()"></app-create-group>
  <app-create-form></app-create-form>
  <app-create-question></app-create-question>
</main>
